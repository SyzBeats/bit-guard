type Query {
  # message
  messagesByUser: [Message!]!
  messageById(data: MessageWhereUniqueInput!): Message
  # user
  loginUser(data: UserLoginInput!): AuthPayload!
  currentUser: User!
  #Link
  linkByMessage: [Link!]!
}

type Mutation {
  signupUser(data: UserCreateInput!): User!
  deleteUser(data: UserWhereUniqueInput!): User
  createMessage(data: MessageCreateInput): Message!
  createSignal(data: MessageCreateInput): Signal!
  deleteMessage(data: MessageWhereUniqueInput!): Message
  createMessageLink(data: LinkCreateInput!): Link!
  createSignalLink(data: SignalLinkCreateInput!): Link!
  deleteLink(data: LinkWhereUniqueInput!): Link
}

# custom types

type Link {
  content: String!
  expiry: String
}

type Message {
  id: ID!
  content: String!
  # create resolver
  links: [Link!]
}

type Signal {
  id: ID!
  content: String!
  # create resolver
  link: Link!
}

type User {
  id: ID!
  email: String!
  name: String
  # create resolver
  messages: [Message!]
}

type Key {
  id: ID!
  key: String!
  messageId: ID!
}

type AuthPayload {
  token: String!
}

# input types

input UserCreateInput {
  email: String!
  password: String!
  name: String!
}

input UserLoginInput {
  email: String!
  password: String!
}

input KeyCreateInput {
  key: String!
  messageId: ID!
}

input MessageCreateInput {
  content: String!
  owner: String
}

input LinkCreateInput {
  messageId: ID!
  expiry: String
}

input SignalLinkCreateInput {
  signalId: ID!
  key: String!
  IV: String!
}

input MessageWhereUniqueInput {
  id: ID!
}

input LinkWhereUniqueInput {
  id: ID!
}

input UserWhereUniqueInput {
  id: ID!
}
